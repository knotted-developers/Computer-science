## SQL normalization(정규화)란 무엇인가? 왜 쓰는가?

#### 🌵 정규화 (normalization): 
데이터를 중복으로 저장하면 일관되지 않은 데이터, 비정상적인 삽입 갱신 삭제 처리, 디스크 공간 낭비 등 많은 문제를 일으킨다. 정규화는 🪵 **중복 데이터를 저장하면서 일으키는 문제점을 없애려고 정보를 주제별로 분할하는 프로그램**🪵을 의미한다.

쉽게 말하자면, 아무렇게나 테이블 짜고 데이터 순서없이 넣고 하면 관리하기가 어려워질 수 있으니까 중복 데이터를 최소화 하는 등 여러 사항을 고려해 예쁘게 설계해서 예상되는 문제들을 방지하는 것.

기본 목표는 🪵**테이블 간에 중복된 데이터를 허용하지 않는다는 것**🪵이다. 중복된 데이터를 허용하지 않음으로써 무결성(Integrity)를 유지할 수 있으며, DB의 저장 용량 역시 줄일 수 있다. 이러한 테이블을 분해하는 정규화 단계가 정의되어 있는데, 여기서 테이블을 어떻게 분해되는지에 따라 정규화 단계가 달라짐.

#### 🌵 정규화의 종류, 정규화의 단계:
![](https://images.velog.io/images/majaeh43/post/3f26963d-a8b1-438f-8108-b59f24975d5b/image.png)
_(보통, 3NF 정규화까지만 해도 충분하다고 함.)_

> 🪵 <제1정규화>
* 제1 정규화란 테이블의 컬럼이 원자값(Atomic Value, 하나의 값)을 갖도록 테이블을 분해하는 것.

![](https://images.velog.io/images/majaeh43/post/7865f1cd-d69f-45c2-898a-fe856828d8f0/image.png)
* 위의 테이블에서 추신수와 박세리는 여러 개의 취미를 가지고 있기 때문에 제1 정규형을 만족하지 못하고 있다. 
* 그렇기 때문에 이를 제1 정규화하여 분해할 수 있다. 
* 제1 정규화를 진행한 테이블은 아래와 같음!
* 한컬럼에는 하나의 값만!

![](https://images.velog.io/images/majaeh43/post/e9cd2252-037e-48ce-a3cb-40e45357f3c8/image.png)

> 🪵 <제2정규화>
* 제2 정규화란 제1 정규화를 진행한 테이블에 대해 **완전 함수 종속**을 만족하도록 테이블을 분해하는 것.
* 여기서 **완전 함수 종속**이라는 것은 기본키의 부분집합이 결정자가 되어선 안된다는 것을 의미

![](https://images.velog.io/images/majaeh43/post/5c14c734-2484-4892-827b-5bf074e5bc4a/image.png)
* 이 테이블에서 **기본키는 (학생번호, 강좌이름)으로 복합키**.
* 그리고 (학생번호, 강좌이름)인 기본키는 **강의실을 결정**하고 있음. (학생번호, 강좌이름) --> (강의실)
* 그런데 여기서 강의실이라는 컬럼은 기본키의 부분집합인 강좌이름에 의해 결정될 수 있다. (강좌이름) --> (강의실)
* 그렇기 때문에 위의 테이블의 경우 다음과 같이 기존의 테이블에서 강의실을 분해하여 별도의 테이블로 관리하여 제2 정규형을 만족시킬 수 있음!
![](https://images.velog.io/images/majaeh43/post/7adfca56-0df6-4783-b13a-0e64e9dca865/image.png)

> 🪵 <제3정규화>
* 제3정규화란 제2정규화를 진행한 테이블에 대해 **이행적 종속**을 없애도록 테이블을 분해하는 것
* 여기서 **이행적 종속**이라는 것은 A -> B, B -> C가 성립할 때 A -> C가 성립되는 것을 의미

![](https://images.velog.io/images/majaeh43/post/77f87b14-8c03-4e48-9998-8350d731f800/image.png)

* 기존의 테이블에서 학생 번호는 강좌 이름을 결정하고 있고, 강좌 이름은 수강료를 결정하고 있음. 
* 그렇기 때문에 이를 (학생 번호, 강좌 이름) 테이블과 (강좌 이름, 수강료) 테이블로 분해해야 함.
* **이행적 종속을 제거하는 이유**는 비교적 간단함. 예를 들어 501번 학생이 수강하는 강좌가 스포츠경영학으로 변경되었다고 하자. 이행적 종속이 존재한다면 501번의 학생은 스포츠경영학이라는 수업을 20000원이라는 수강료로 듣게 된다. 물론 강좌 이름에 맞게 수강료를 다시 변경할 수 있지만, 이러한 번거로움을 해결하기 위해 제3 정규화를 하는 것.
* 즉, 학생 번호를 통해 강좌 이름을 참조하고, 강좌 이름으로 수강료를 참조하도록 테이블을 분해해야 하며 그 결과는 다음의 그림과 같다.

![](https://images.velog.io/images/majaeh43/post/924113a0-3906-4e55-a223-21c9f28c607c/image.png)

